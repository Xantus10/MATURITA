Model in mongodb-schema.mml file
Open with https://mongomodeler.com/editor.html


# collection users
_id		ObjectId
MicrosoftId	string			unique		// Microsoft Entra Id
Name {
 First		string
 Last		string
}
Role		"admin"|"user"				// User role
LastLogin	Datetime		TTL index	// Last login time with TTL to enable auto deletion
Bans[] {
 CreatedAt	Datetime				// When was the user banned
 Until		Datetime				// Until when is the ban valid
 IssuedBy	ObjectId -> users._id			// Who issued the ban
 Reason		string					// Reason for ban
}
Socials {						// Optional contact info for user
 Email		string		NotReq			// Email
 Phone		string		NotReq			// Phone number
 Instagram	string		NotReq			// Instagram username
 Discord	string		NotReq			// Discord username
}


# collection posts
_id		ObjectId
CreatorId	ObjectId -> users._id			// Reference to users collection
Title		string					// Title of the post
CreatedAt	Datetime				// Time of creation
RemoveAt	Datetime		TTL index	// Time to remove with TTL to enable auto deletion
Subjects	string[]				// Array of subject shorthands
State		"like new"|"good"|"worn"		// State of the book
Years		number[]				// Numbers of the years the book is used in
Price {							// Prices of the book, in case the price is not a range, the min
 Min		integer					// and max values will hold the same value
 Max		integer
}
Photos		string[]				// Filesystem paths to the photos of the book


# collection subjects
_id		ObjectId				// This collection is NOT for referencing, but for storage
Subject		string			unique		// Shorthand of the subject


# collection blacklists
_id		ObjectId
MicrosoftId	string			unique		// Blacklisted Microsoft Entra Id
CreatedAt	Datetime				// When was user blacklisted
Reason		string					// Reason for blacklist


# collection messages
_id		ObjectId
Sender		ObjectId -> users._id			// Sender of the message
TargetUser	ObjectId -> users._id	nullable	// Reciever user (mutually exclusive targets)
TargetGroup	'admin' | 'all'		nullable	// Reciever group (mutually exclusive targets)
SentAt		Date			TTL index	// When was the message sent (delete after 3 mon)
Title		string					// Title of the message
Content		string					// Content of the message
